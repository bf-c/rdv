{"version":3,"sources":["Show.js","WithLinks.js","Viewer.js","App.js","index.js"],"names":["tumblr_re","GfycatStore","store","JSON","parse","localStorage","getItem","e","cleanExpired","now","Date","id","expiresAt","get","_get","Object","asyncToGenerator","regenerator_default","a","mark","_callee","gfyId","resp","json","wrap","_context","prev","next","fetch","concat","sent","url","gfyItem","webmUrl","mp4Url","gifUrl","getTime","setItem","stringify","abrupt","stop","this","_x","apply","arguments","Gfycat","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","pathname","split","pop","then","setState","catch","err","console","error","react_default","createElement","autoPlay","loop","controls","src","muted","Component","Iframe","_this2","imgLoaded","loading","_this$props","title","restProps","objectWithoutProperties","assign","className","onLoad","frameBorder","scrolling","Img","_this3","imgErrored","alt","href","onError","style","objectFit","Strategy","_ref","host","slice","protocol","replace","test","Show_Img","Show_Gfycat","origin","match","endsWith","searchParams","_url$pathname$match$s","_url$pathname$match$s2","slicedToArray","username","pic_id","src_base","toLowerCase","join","backgroundImage","map","ext","Show_Iframe","Show","_ref2","post","source","permalink","log","URL","key","flexGrow","flexShrink","padding","paddingTop","color","target","rel","Show_Strategy","LinkConsumer","enterFullScreen","video","requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","webkitEnterFullScreen","bind","Viewer","pos","handleKeys","ctrlKey","altKey","shiftKey","metaKey","document","querySelector","code","paused","play","pause","posts","length","onLastReach","_ref3","Math","max","window","addEventListener","removeEventListener","es","onSwipedLeft","onSwipedRight","disabled","onClick","type","checked","onChange","Show_Show","LinkedViewer","_Component","_class2","_getPrototypeOf2","_len","args","Array","_key","subreddit","sort","duration","links","isHome","handleHashChange","matches","data","location","hash","substr","children","child","filter","is_self","startsWith","handleLastReach","_callee2","_this$state","after","newPosts","_context2","name","toConsumableArray","inherits","createClass","value","backgroundColor","width","height","display","justifyContent","alignItems","App","ReactDOM","render","App_App","getElementById"],"mappings":"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","file":"static/js/main.847efbd7.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './Show.css';\n\nconst tumblr_re = /^\\d+?\\.media\\.tumblr\\.com$/;\n\nconst gfycatStoreKey = 'gfycatUrls';\nconst GfycatStore = (() => {\n  let store;\n  try {\n    store = JSON.parse(localStorage.getItem(gfycatStoreKey) || '{}');\n  } catch (e) {\n    store = {};\n  }\n\n  const cleanExpired = () => {\n    const now = new Date();\n    for (const id in store) {\n      if (store[id].expiresAt <= now) delete store[id];\n    }\n  };\n\n  return {\n    get: async gfyId => {\n      cleanExpired();\n      if (!(gfyId in store)) {\n        const resp = await fetch(`https://api.gfycat.com/v1/gfycats/${gfyId}`);\n        const json = await resp.json();\n        store[gfyId] = {\n          url:\n            json.gfyItem.webmUrl || json.gfyItem.mp4Url || json.gfyItem.gifUrl,\n          expiresAt: new Date().getTime() + 1 * 24 * 60 * 60 * 1000, // 1 day\n        };\n      }\n      localStorage.setItem(gfycatStoreKey, JSON.stringify(store));\n      return store[gfyId].url;\n    },\n  };\n})();\n\nclass Gfycat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { webmUrl: null };\n    GfycatStore.get(props.url.pathname.split('/').pop())\n      .then(webmUrl => this.setState({ webmUrl }))\n      .catch(err => console.error(err));\n  }\n\n  render() {\n    return (\n      <video\n        autoPlay\n        loop\n        controls\n        src={this.state.webmUrl}\n        muted={this.props.muted}\n      />\n    );\n  }\n}\n\nclass Iframe extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  render() {\n    const { src, title, ...restProps } = this.props;\n    return (\n      <iframe\n        className={this.state.loading ? 'iframe-loading' : ''}\n        onLoad={this.imgLoaded}\n        title={title}\n        src={src}\n        frameBorder=\"0\"\n        scrolling=\"no\"\n        {...restProps}\n      />\n    );\n  }\n}\n\nclass Img extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: false };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  imgErrored = () => this.setState({ loading: false, error: true });\n\n  render() {\n    const className = this.state.loading\n      ? 'loading'\n      : this.state.error\n      ? 'error'\n      : '';\n    return (\n      <img\n        className={className}\n        alt=\"\"\n        src={this.props.url.href}\n        onLoad={this.imgLoaded}\n        onError={this.imgErrored}\n        style={{ objectFit: 'contain' }}\n      />\n    );\n  }\n}\n\nconst Strategy = ({ url, muted }) => {\n  let title, src;\n  switch (true) {\n    case url.host === 'i.imgur.com':\n      if (url.pathname.slice(0, 3) === '/a/') {\n        title = 'imgur';\n        src =\n          url.protocol +\n          '//imgur.com' +\n          url.pathname.replace('.jpg', '') +\n          '/embed?pub=true';\n        break;\n      }\n    // eslint-disable-next-line -- FALLTHROUGH\n    case tumblr_re.test(url.host):\n      return <Img url={url} />;\n    case url.host === 'gfycat.com':\n      return <Gfycat url={url} muted={muted} />;\n    case url.host === 'www.xvideos.com':\n      title = 'xvideos';\n      src =\n        url.origin + '/embedframe/' + url.pathname.match(/\\/video(\\d+)\\//)[1];\n      break;\n    case url.host.endsWith('.pornhub.com') || url.host.endsWith('.pornhub.org'):\n      title = 'pornhub';\n      src = 'https://www.pornhub.com/embed/' + url.searchParams.get('viewkey');\n      break;\n    case url.host === 'xhamster.com':\n      title = 'xhamster';\n      src = url.origin + '/embed/' + url.pathname.split('/')[2];\n      break;\n    case url.host === 'www.hentai-foundry.com':\n      const [username, pic_id] = url.pathname\n        .match(/^\\/pictures\\/user\\/(.*)\\/(.*)\\//)\n        .slice(1);\n      const src_base = [\n        'https://pictures.hentai-foundry.com',\n        username[0].toLowerCase(),\n        username,\n        pic_id,\n      ].join('/');\n      return (\n        <div\n          className=\"img\"\n          style={{\n            backgroundImage: ['png', 'jpg']\n              .map(ext => `url(${src_base}.${ext})`)\n              .join(','),\n          }}\n        />\n      );\n    default:\n      title = 'default';\n      src = url.href;\n  }\n  return <Iframe src={src} title={title} />;\n};\n\nexport default function Show({ post, style, muted }) {\n  const { url: source, permalink } = post;\n  console.log(source);\n  const url = new URL(source);\n  return (\n    <div key={source} className=\"item-container\" style={style}>\n      <div\n        style={{\n          flexGrow: 0,\n          flexShrink: 0,\n          padding: 5,\n          paddingTop: 0,\n          color: 'white',\n        }}\n      >\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n          Source\n        </a>{' '}\n        <a\n          href={'https://www.reddit.com' + permalink}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Reddit\n        </a>\n      </div>\n      <Strategy url={url} muted={muted} />\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport './WithLinks.css';\n\nexport default LinkConsumer =>\n  class extends Component {\n    state = {\n      subreddit: null,\n      sort: null,\n      duration: null,\n      posts: [],\n      links: [],\n      isHome: true,\n      loading: true,\n    };\n\n    componentDidMount() {\n      this.handleHashChange();\n      window.addEventListener('hashchange', this.handleHashChange);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('hashchange', this.handleHashChange);\n    }\n\n    handleHashChange = async () => {\n      const pathname = window.location.hash;\n      const matches = pathname.match(\n        /^#\\/r\\/([0-9a-zA-Z_]+)\\/?(\\/[a-z]+)?\\/?(\\/[a-z]+)?\\/?$/,\n      );\n      if (!matches) {\n        this.setState({ isHome: true });\n        if (pathname !== '') {\n          window.location.hash = '';\n          return;\n        }\n      } else {\n        this.setState({ isHome: false, loading: true });\n        const subreddit = matches[1];\n        const sort = (matches[2] && matches[2].substr(1)) || 'hot';\n        const duration = (matches[3] && matches[3].substr(1)) || 'day';\n        const resp = await fetch(\n          `https://www.reddit.com/r/${subreddit}/${sort}.json?t=${duration}`,\n        );\n        const data = await resp.json();\n        const posts = data.data.children\n          .map(child => child.data)\n          .filter(child => !child.is_self)\n          .filter(child => !child.url.startsWith('https://www.reddit.com/'));\n        console.log(posts);\n        this.setState({ subreddit, sort, duration, posts, loading: false });\n      }\n    };\n\n    handleLastReach = async () => {\n      const { posts, subreddit, sort, duration } = this.state;\n      const after =\n        (posts && posts[posts.length - 1] && posts[posts.length - 1].name) ||\n        null;\n      if (after) {\n        const resp = await fetch(\n          `https://www.reddit.com/r/${subreddit}/${sort}.json?t=${duration}?after=${after}`,\n        );\n        const data = await resp.json();\n        const newPosts = data.data.children\n          .map(child => child.data)\n          .filter(child => !child.is_self)\n          .filter(child => !child.url.startsWith('https://www.reddit.com/'));\n        this.setState(({ posts }) => ({ posts: [...posts, ...newPosts] }));\n      }\n    };\n\n    render() {\n      if (this.state.isHome) {\n        return (\n          <div\n            style={{\n              backgroundColor: 'black',\n              width: '100%',\n              height: '100%',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n          >\n            <div style={{ color: 'white' }}>Welcome</div>\n          </div>\n        );\n      }\n      if (this.state.loading || this.state.posts.length === 0) {\n        return (\n          <div\n            style={{\n              backgroundColor: 'black',\n              width: '100%',\n              height: '100%',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n          >\n            <div style={{ color: 'white' }}>Loading, please wait...</div>\n          </div>\n        );\n      }\n      return (\n        <LinkConsumer\n          onLastReach={this.handleLastReach.bind(this)}\n          posts={this.state.posts}\n          subreddit={this.state.subreddit}\n          sort={this.state.sort}\n          duration={this.state.duration}\n        />\n      );\n    }\n  };\n","import React, { Component } from 'react';\nimport Show from './Show';\nimport './Viewer.css';\nimport { Swipeable } from 'react-swipeable';\n\nconst enterFullScreen = video => {\n  if (video) {\n    (\n      video.requestFullscreen ||\n      video.webkitRequestFullScreen ||\n      video.mozRequestFullScreen ||\n      video.msRequestFullScreen ||\n      video.webkitEnterFullScreen ||\n      (() => null)\n    ).bind(video)();\n  }\n};\n\nexport default class Viewer extends Component {\n  state = { pos: 0, muted: true };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeys);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeys);\n  }\n\n  handleKeys = e => {\n    if (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) {\n      return;\n    }\n    const video = document.querySelector('.item-container > video');\n\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'KeyA':\n        return this.prev();\n      case 'ArrowRight':\n      case 'KeyD':\n        return this.next();\n      case 'KeyF':\n        video && enterFullScreen(video);\n        return;\n      case 'Space':\n        if (video) {\n          if (video.paused) {\n            video.play();\n          } else {\n            video.pause();\n          }\n        }\n        return;\n      default:\n        return;\n    }\n  };\n\n  next = () => {\n    const { pos } = this.state;\n    const { posts } = this.props;\n    if (pos < posts.length) {\n      this.setState(\n        ({ pos }, { posts }) => ({\n          pos: pos < posts.length ? pos + 1 : pos,\n        }),\n        () => {\n          if (this.state.pos === this.props.posts.length - 1) {\n            this.props.onLastReach();\n          }\n        },\n      );\n    }\n  };\n\n  prev = () => {\n    this.setState(({ pos }) => ({\n      pos: Math.max(pos - 1, 0),\n    }));\n  };\n\n  render() {\n    const { pos } = this.state;\n    const { posts } = this.props;\n    return (\n      <Swipeable\n        className=\"viewer-container\"\n        onSwipedLeft={() => {\n          this.next();\n        }}\n        onSwipedRight={() => {\n          this.prev();\n        }}\n      >\n        <div className=\"button-container\">\n          <button disabled={pos === 0} onClick={this.prev}>\n            Previous\n          </button>\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={this.state.muted}\n              onChange={e => {\n                this.setState({ muted: e.target.checked });\n              }}\n            />{' '}\n            Mute\n          </label>\n          <button disabled={pos === posts.length - 1} onClick={this.next}>\n            Next\n          </button>\n        </div>\n        <Show post={posts[pos]} muted={this.state.muted} />\n      </Swipeable>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport WithLinks from \"./WithLinks\";\nimport Viewer from \"./Viewer\";\n\nconst LinkedViewer = WithLinks(Viewer);\n\nexport default class App extends Component {\n  render() {\n    return <LinkedViewer />;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}