{"version":3,"sources":["WithLinks.js","Show.js","Viewer.js","App.js","index.js"],"names":["tumblr_re","GfycatStore","store","JSON","parse","localStorage","getItem","e","cleanExpired","now","Date","id","expiresAt","get","_get","Object","asyncToGenerator","regenerator_default","a","mark","_callee","gfyId","resp","json","wrap","_context","prev","next","fetch","concat","sent","console","log","url","gfyItem","webmUrl","webpUrl","mp4Url","gifUrl","getTime","setItem","stringify","abrupt","stop","this","_x","apply","arguments","Gfycat","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","pathname","substr","then","setState","catch","err","error","react_default","createElement","autoPlay","loop","controls","src","Component","Iframe","_this2","imgLoaded","loading","_this$props","title","restProps","objectWithoutProperties","assign","className","onLoad","frameBorder","scrolling","Img","_this3","imgErrored","alt","href","onError","style","objectFit","Strategy","_ref","host","slice","protocol","replace","test","Show_Img","Show_Gfycat","origin","match","endsWith","searchParams","split","_url$pathname$match$s","_url$pathname$match$s2","slicedToArray","username","pic_id","src_base","toLowerCase","join","backgroundImage","map","ext","Show_Iframe","Show","_ref2","source","link","URL","key","flexGrow","flexShrink","padding","paddingTop","color","target","rel","Show_Strategy","LinkConsumer","Viewer","handleKeys","ctrlKey","altKey","shiftKey","metaKey","video","document","querySelector","code","requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen","webkitEnterFullScreen","bind","paused","play","pause","pos","links","length","onLastReach","_ref3","Math","max","window","addEventListener","removeEventListener","disabled","onClick","Show_Show","LinkedViewer","_Component","_class2","_getPrototypeOf2","_len","args","Array","_key","subreddit","sort","posts","handleLastReach","_this$state","duration","after","data","newPosts","name","children","child","filter","is_self","startsWith","milan","toConsumableArray","warn","inherits","createClass","value","_componentDidMount","_callee2","matches","_context2","location","backgroundColor","width","height","display","justifyContent","alignItems","post","App","ReactDOM","render","App_App","getElementById"],"mappings":"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","file":"static/js/main.8ebb2ced.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './WithLinks.css';\n\nfunction shuffled(inp) {\n  const arr = inp.slice();\n  for (let i = arr.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n  return arr;\n}\n\nexport default LinkConsumer =>\n  class extends Component {\n    state = { subreddit: null, sort: null, posts: [], links: [] };\n\n    async componentDidMount() {\n      const pathname = window.location.pathname;\n      const matches = pathname.match(\n        /^\\/r\\/([0-9a-zA-Z_]+)(\\/[a-z]+)?(\\/[a-z]+)$/,\n      );\n      if (!matches) {\n        if (pathname !== '/') {\n          window.location.pathname = '/';\n          return;\n        }\n      } else {\n        const subreddit = matches[1];\n        const sort = (matches[2] && matches[2].substr(1)) || 'hot';\n        const duration = (matches[3] && matches[3].substr(1)) || 'all';\n        this.setState({ subreddit, sort, duration });\n        const resp = await fetch(\n          `https://www.reddit.com/r/${subreddit}/${sort}.json?t=${duration}`,\n        );\n        const data = await resp.json();\n        const posts = data.data.children\n          .map(child => child.data)\n          .filter(child => !child.is_self)\n          .filter(child => !child.url.startsWith('https://www.reddit.com/'));\n        console.log(posts);\n        this.setState({ posts });\n      }\n    }\n\n    handleLastReach = async () => {\n      const { posts, subreddit, sort, duration } = this.state;\n      const after =\n        (posts && posts[posts.length - 1] && posts[posts.length - 1].name) ||\n        null;\n      if (after) {\n        const resp = await fetch(\n          `https://www.reddit.com/r/${subreddit}/${sort}.json?t=${duration}?after=${after}`,\n        );\n        const data = await resp.json();\n        const newPosts = data.data.children\n          .map(child => child.data)\n          .filter(child => !child.is_self)\n          .filter(child => !child.url.startsWith('https://www.reddit.com/'));\n        this.setState(({ posts }) => {\n          const milan = [...posts, ...newPosts];\n          console.warn({ milan });\n          return { posts: milan };\n        });\n      }\n    };\n\n    render() {\n      if (this.state.posts.length === 0) {\n        return (\n          <div\n            style={{\n              backgroundColor: 'black',\n              width: '100%',\n              height: '100%',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n            }}\n          >\n            <div style={{ color: 'white' }}>Loading, please wait...</div>\n          </div>\n        );\n      }\n      return (\n        <LinkConsumer\n          onLastReach={this.handleLastReach.bind(this)}\n          links={this.state.posts.map(post => post.url)}\n        />\n      );\n    }\n  };\n","import React, { Component } from 'react';\nimport './Show.css';\n\nconst tumblr_re = /^\\d+?\\.media\\.tumblr\\.com$/;\n\nconst gfycatStoreKey = 'gfycatUrls';\nconst GfycatStore = (() => {\n  let store;\n  try {\n    store = JSON.parse(localStorage.getItem(gfycatStoreKey) || '{}');\n  } catch (e) {\n    store = {};\n  }\n\n  const cleanExpired = () => {\n    const now = new Date();\n    for (const id in store) {\n      if (store[id].expiresAt <= now) delete store[id];\n    }\n  };\n\n  return {\n    get: async gfyId => {\n      cleanExpired();\n      if (!(gfyId in store)) {\n        const resp = await fetch(`https://api.gfycat.com/v1/gfycats/${gfyId}`);\n        const json = await resp.json();\n        console.log(json);\n        store[gfyId] = {\n          url:\n            json.gfyItem.webmUrl ||\n            json.gfyItem.webpUrl ||\n            json.gfyItem.mp4Url ||\n            json.gfyItem.gifUrl,\n          expiresAt: new Date().getTime() + 1 * 24 * 60 * 60 * 1000, // 1 day\n        };\n      }\n      localStorage.setItem(gfycatStoreKey, JSON.stringify(store));\n      return store[gfyId].url;\n    },\n  };\n})();\n\nclass Gfycat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { webmUrl: null };\n    GfycatStore.get(props.url.pathname.substr(1))\n      .then(webmUrl => this.setState({ webmUrl }))\n      .catch(err => console.error(err));\n  }\n\n  render() {\n    return <video autoPlay loop controls src={this.state.webmUrl} />;\n  }\n}\n\nclass Iframe extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  render() {\n    const { src, title, ...restProps } = this.props;\n    return (\n      <iframe\n        className={this.state.loading ? 'iframe-loading' : ''}\n        onLoad={this.imgLoaded}\n        title={title}\n        src={src}\n        frameBorder=\"0\"\n        scrolling=\"no\"\n        {...restProps}\n      />\n    );\n  }\n}\n\nclass Img extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: false };\n  }\n\n  imgLoaded = () => this.setState({ loading: false });\n\n  imgErrored = () => this.setState({ loading: false, error: true });\n\n  render() {\n    const className = this.state.loading\n      ? 'loading'\n      : this.state.error\n      ? 'error'\n      : '';\n    return (\n      <img\n        className={className}\n        alt=\"\"\n        src={this.props.url.href}\n        onLoad={this.imgLoaded}\n        onError={this.imgErrored}\n        style={{ objectFit: 'contain' }}\n      />\n    );\n  }\n}\n\nconst Strategy = ({ url }) => {\n  let title, src;\n  switch (true) {\n    case url.host === 'i.imgur.com':\n      if (url.pathname.slice(0, 3) === '/a/') {\n        title = 'imgur';\n        src =\n          url.protocol +\n          '//imgur.com' +\n          url.pathname.replace('.jpg', '') +\n          '/embed?pub=true';\n        break;\n      }\n    // eslint-disable-next-line -- FALLTHROUGH\n    case tumblr_re.test(url.host):\n      return <Img url={url} />;\n    case url.host === 'gfycat.com':\n      return <Gfycat url={url} />;\n    case url.host === 'www.xvideos.com':\n      title = 'xvideos';\n      src =\n        url.origin + '/embedframe/' + url.pathname.match(/\\/video(\\d+)\\//)[1];\n      break;\n    case (url.host.endsWith('.pornhub.com') || url.host.endsWith('.pornhub.org')):\n      title = 'pornhub';\n      src = 'https://www.pornhub.com/embed/' + url.searchParams.get('viewkey');\n      break;\n    case url.host === 'xhamster.com':\n      title = 'xhamster';\n      src = url.origin + '/embed/' + url.pathname.split('/')[2];\n      break;\n    case url.host === 'www.hentai-foundry.com':\n      const [username, pic_id] = url.pathname\n        .match(/^\\/pictures\\/user\\/(.*)\\/(.*)\\//)\n        .slice(1);\n      const src_base = [\n        'https://pictures.hentai-foundry.com',\n        username[0].toLowerCase(),\n        username,\n        pic_id,\n      ].join('/');\n      return (\n        <div\n          className=\"img\"\n          style={{\n            backgroundImage: ['png', 'jpg']\n              .map(ext => `url(${src_base}.${ext})`)\n              .join(','),\n          }}\n        />\n      );\n    default:\n      title = 'default';\n      src = url.href;\n  }\n  return <Iframe src={src} title={title} />;\n};\n\nexport default function Show({ link: source, style }) {\n  console.log(source);\n  const url = new URL(source);\n  return (\n    <div key={source} className=\"item-container\" style={style}>\n      <div\n        style={{\n          flexGrow: 0,\n          flexShrink: 0,\n          padding: 5,\n          paddingTop: 0,\n          color: 'white',\n        }}\n      >\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n          Source\n        </a>\n      </div>\n      <Strategy url={url} />\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport Show from './Show';\nimport './Viewer.css';\n\nexport default class Viewer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { pos: 0 };\n  }\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeys);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeys);\n  }\n\n  handleKeys = e => {\n    if (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) {\n      return;\n    }\n    const video = document.querySelector('.item-container > video');\n\n    switch (e.code) {\n      case 'ArrowLeft':\n      case 'KeyA':\n        return this.prev();\n      case 'ArrowRight':\n      case 'KeyD':\n        return this.next();\n      case 'KeyF':\n        if (video) {\n          (\n            video.requestFullscreen ||\n            video.webkitRequestFullScreen ||\n            video.mozRequestFullScreen ||\n            video.msRequestFullScreen ||\n            video.webkitEnterFullScreen ||\n            (() => null)\n          ).bind(video)();\n        }\n        return;\n      case 'Space':\n        if (video) {\n          if (video.paused) {\n            video.play();\n          } else {\n            video.pause();\n          }\n        }\n        return;\n      default:\n        return;\n    }\n  };\n\n  next = () => {\n    const { pos } = this.state;\n    const { links } = this.props;\n    if (pos < links.length) {\n      this.setState(\n        ({ pos }, { links }) => ({\n          pos: pos < links.length ? pos + 1 : pos,\n        }),\n        () => {\n          if (this.state.pos === this.props.links.length - 1) {\n            this.props.onLastReach();\n          }\n        },\n      );\n    }\n  };\n\n  prev = () => {\n    this.setState(({ pos }) => ({\n      pos: Math.max(pos - 1, 0),\n    }));\n  };\n\n  render() {\n    const { pos } = this.state;\n    const { links } = this.props;\n    return (\n      <div className=\"viewer-container\">\n        <div className=\"button-container\">\n          <button disabled={pos === 0} onClick={this.prev}>\n            Previous\n          </button>\n          <button disabled={pos === links.length - 1} onClick={this.next}>\n            Next\n          </button>\n        </div>\n        <Show link={links[pos]} />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport WithLinks from \"./WithLinks\";\nimport Viewer from \"./Viewer\";\n\nconst LinkedViewer = WithLinks(Viewer);\n\nexport default class App extends Component {\n  render() {\n    return <LinkedViewer />;\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}